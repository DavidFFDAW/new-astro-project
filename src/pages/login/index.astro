---
import AsyncForm from '@components/forms/AsyncForm';
import Layout from '@layouts/Layout.astro';
const searchParams = Astro.url.searchParams;
const loginRedirection = searchParams.get('next') || '/private/dashboard';
---

<Layout title="Login Page">
    <div class="w1 flex end acenter whole-login-container">
        <div class="login-form-container flex column between acenter">
            <header class="login-header">Login</header>

            <section class="login-text-section">
                <p>Accede a tu cuenta para poder acceder a los distintos apartados de la aplicaci√≥n.</p>
            </section>

            <AsyncForm endpoint="/auth/login" method="post" redirection={loginRedirection} client:visible>
                <div class="w1 flex column gap-small down">
                    <input type="email" class="input" name="email" placeholder="user@permission.com" required autofocus autocomplete="email" />
                    <input type="password" class="input" name="password" placeholder="*********" required autocomplete="current-password" />

                    <div class="w1 flex end gap-small">
                        <button type="submit" class="btn cta" aria-label="Acceder">Acceder</button>
                    </div>
                </div>
            </AsyncForm>
        </div>
    </div>
</Layout>

<style>
    body#login.login-page {
        background-image: url(https://media.bizj.us/view/img/10402994/wrestlemania-65*1200xx3710-2093-308-480.jpg);
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
    }
    .whole-login-container {
        min-height: 90vh;
        padding: 1rem;
    }
    .login-form-container {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        gap: 2rem;
        min-width: 300px;
        max-width: 300px;
        min-height: 250px;
        background: #fff;
        padding: 1rem;
        border-radius: 8px;
    }
</style>
